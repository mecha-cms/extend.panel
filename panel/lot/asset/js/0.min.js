!function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t){return"function"==typeof t},e=function(t,n){return t&&o(n)&&t instanceof n},r=function(t){return"number"==typeof t},u=function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")},i=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||e(t,Object))},o=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},c=function(t){return"string"==typeof t},a=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},f=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(u(e))return function(t,n){return void 0===n&&(n=10),parseInt(t,n)}(e);if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return{false:!1,null:null,true:!0}[e]||e},s=document,l=window,p=s.body,v=s.documentElement,d=function(t){var n=g(t),e=k(t),r=x(t);return!1!==e?[r,e,n]:[r,n]},h=function(t,n,e){if(void 0===e&&(e=!0),!w(t,n))return null;var r=t.getAttribute(n);return e?f(r):r},g=function(t,n){void 0===n&&(n=!0);for(var e,r=t.attributes,u={},i=0,o=r.length;i<o;++i)e=r[i].value,u[r[i].name]=n?f(e):e;return u},m=function(t,n){var e=t.children;return r(n)?e[n]||null:e||[]},b=function(t,n){return(n||s).querySelector(t)},y=function(t,n){return(n||s).querySelectorAll(t)},k=function(t,n){void 0===n&&(n=!0);var e="innerHTML";if(!O(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},x=function(t){return function(t){return t.toLowerCase()}(t&&t.nodeName||"")||null},E=function(t){return t.nextElementSibling||null},$=function(t){return t.parentNode||null},L=function(t){return t.previousElementSibling||null},T=function(t,n){void 0===n&&(n=!0);var e="textContent";if(!O(t,e))return!1;var r=t[e];return""!==(r=n?r.trim():r)?r:null},w=function(t,n){return t.hasAttribute(n)},S=function(t){return null!==$(t)},O=function(t,n){return n in t},H=function(t,n){return t.removeAttribute(n),t},A=function(t,n){return t.classList.remove(n),t},C=function(n,e){if(t(e))return e.forEach((function(t){return n.classList.remove(t)})),n;if(i(e)){for(var r in e)e[r]&&n.classList.remove(r);return n}return n.className="",n},F=function(t){var n=$(t);return t.remove(),n},R=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,a(e)),t},B=function(t,n){return t.append(n),n},P=function(t,n){return t.classList.add(n),t},D=function(t,n,e){return t=c(t)?s.createElement(t):t,i(n)&&(e=n,n=!1),c(n)&&N(t,n),i(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?R(t,r,e):H(t,r)}(t,e),t},N=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return O(t,r)&&(t[r]=e?n.trim():n),t},q=function(t,n){return $(t).insertBefore(n,t),n},K=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="textContent";return O(t,r)&&(t[r]=e?n.trim():n),t},M=function(t){return D.apply(void 0,t)},I=l.history,U=l.location,J=s.currentScript,X=function(t){return t&&t.preventDefault()},_=function(t,n,e){n.removeEventListener(t,e)},z=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)},G=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(Object,[{}].concat(n))};function Y(t){var n={};return t.hooks=n,t.fire=function(e,r){return o(n[e])?(n[e].forEach((function(n){return n.apply(t,r)})),t):t},t.off=function(e,r){if(!o(e))return n={},t;if(o(n[e]))if(o(r)){for(var u=0,i=n[e].length;u<i;++u)if(r===n[e][u]){n[e].splice(u,1);break}0===j&&delete n[e]}else delete n[e];return t},t.on=function(e,r){return o(n[e])||(n[e]=[]),o(r)&&n[e].push(r),t},t}var Q=Y({});Q.fire,Q.off,Q.on,Q.hooks;var V,W,Z=function(t,n){return void 0===n&&(n=""),t.replace(et("["+n+rt.replace(/./g,"\\$&")+"]"),"\\$&")},tt=function(t){return nt(t)?t.source.replace(/\\\//g,"/"):null},nt=function(t){return e(t,RegExp)},et=function(t,n){return nt(t)?t:(t=t.replace(/\//g,"\\/"),RegExp(t,o(n)?n:"g"))},rt="!$^*()+=[]{}|:<>,.?/-",ut=function(t,n){return t.scrollLeft=n[0],t.scrollTop=n[1],t},it=function(t,n){var e=n.indexOf(t);return-1!==e?e:null},ot=function(t){return t.toLowerCase()},ct=function(t){return t.toUpperCase()},at=function(t){return t.length},ft=function(t){return at(st(t))},st=function(t){return Object.keys(t)},lt=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(u(e))return function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)}(e);if(i(e)){for(var r in e)e[r]=n(e[r]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},pt="F3H",vt="GET",dt="document",ht="text",gt="//"+U.hostname;function mt(t){return Lt(t)?"submit":"click"}function bt(t){return t.split("#")[1]||""}function yt(t){for(var n,e,r,u,i,o,c={},a=y("link[rel=dns-prefetch],link[rel=preconnect],link[rel=prefetch],link[rel=preload],link[rel=prerender]",t),f=0,s=at(a);f<s;++f)i=r=a[f],o=void 0,o=ot(pt),lt(h(i,"data-"+o)||h(i,o))||(e=h(r,"href"),r.id=n=r.id||"F3H:"+Ot(e||T(r)),c[n]=u=d(r),e&&(c[n][at(u)-1].href=r.href));return c}function kt(){return jt(U.href)}function xt(t){for(var n,e,r,u,i={},o=y("script",t),c=0,a=at(o);c<a;++c)Tt(r=o[c])||(e=h(r,"src"),r.id=n=r.id||"F3H:"+Ot(e||T(r)),i[n]=u=d(r),e&&(i[n][at(u)-1].src=r.src));return i}function Et(t){for(var n,e,r,u,i,o,c={},a=y("link[rel=stylesheet],style",t),f=0,s=at(a);f<s;++f)i=r=a[f],o=void 0,o=ot(pt),lt(h(i,"data-"+o)||h(i,o))||(e=h(r,"href"),r.id=n=r.id||"F3H:"+Ot(e||T(r)),c[n]=u=d(r),e&&(c[n][at(u)-1].href=r.href));return c}function $t(t,n){return t?s.getElementById(t)||(n?s.getElementsByName(t)[0]:null):null}function Lt(t){return"form"===x(t)}function Tt(t){if(t.src&&J.src===t.src)return 1;var n=ot(pt);return lt(h(t,"data-"+n)||h(t,n))||et("\\bF3H\\b").test(T(t)||"")?1:0}function wt(t){var n=ot(pt);return w(t,"data-"+n)||w(t,n)?lt(h(t,"data-"+n)||h(t,n))?1:0:1}function St(t){return t.split("#")[0]}function jt(t){return t.replace(/\/+(?=[?&#]|$)/,"")}function Ot(t){var n,e=at(t),r=0;if(0===e)return r;for(n=0;n<e;++n)r=(r<<5)-r+t.charCodeAt(n),r&=r;return r<1?-1*r:r}function Ht(t){var n,e,r={},u=t.getAllResponseHeaders().trim().split(/[\r\n]+/);for(n in u)e=u[n].split(": "),r[ot(e.shift())]=lt(e.join(": "));return new Proxy(r,{get:function(t,n){return t[ot(n)]||null},set:function(t,n,e){t[ot(n)]=e}})}function At(t,r){void 0===t&&(t=s),void 0===r&&(r={});var u=this;if(!e(u,At))return new At(t,r);if((!o(t)||function(t){return!1===t||!0===t}(t)||i(t))&&(r=t,t=s),!t.F3H){u.state=r=G(At.state,!0===r?{cache:r}:r||{}),u.source=t,r.turbo&&(r.cache=!0);var c={},a=null,f=null,p=null,d=kt(),h=d,g={},m=null,k=O(r.sources),x=null,$=null,L=Y(u),T=L.fire,w=L.hooks;At.instances[t.id||t.name||ft(At.instances)]=u,t.F3H=1;var j=!1;return u.abort=function(t){return t?g[t]&&C(t):R(),u},u.caches=c,u.fetch=function(t,n,e){return P(e,n,t)},u.links=a,u.lot=null,u.ref=null,u.scripts=m,u.state=r,u.styles=$,u.status=null,u.pop=function(){return t.F3H?(delete t.F3H,k.forEach((function(t){z(mt(t),t,nt)})),_("DOMContentLoaded",l,tt),_("hashchange",l,et),_("keydown",s,it),_("keyup",s,ot),_("popstate",l,at),T("pop",[s,l]),u.abort()):u},z("DOMContentLoaded",l,tt),z("hashchange",l,et),z("popstate",l,at),u}function O(t,e){d=kt();var i=y(t,e),o=[];return n(r.is)?i.forEach((function(t){r.is.call(u,t,d)&&wt(t)&&o.push(t)})):i.forEach((function(t){wt(t)&&o.push(t)})),o}function H(t){t!==kt()&&r.history&&I.pushState({},"",t)}function A(t,n,e){var i,o=function(t){return t===l}(t),d=r.history;if(vt!==n||t!==p||o){if(p=t,u.ref=jt(h=e),T("exit",[s,t]),r.cache){var g=c[jt(St(e))];if(g)return u.lot=f=g[2],u.status=x=g[0],g[3]&&!o&&d&&K(v),H(e),i=[g[1],t],g[3]&&(a=J(i[0])),g[3]&&($=Z(i[0])),T("success",i),T(g[0],i),k=O(r.sources),g[3]&&(m=Q(i[0])),st(i),void T("enter",i)}var b,y,E=P(t,n,e,r.lot),L=E.upload,w=dt===E.responseType;return z("abort",E,(function(){S(),T("abort",[E.response,t])})),z("error",E,b=function(){S(),w&&!o&&d&&K(v),i=[E.response,t],w&&(a=J(i[0])),w&&($=Z(i[0])),T("error",i),k=O(r.sources),w&&(m=Q(i[0])),st(i),T("enter",i)}),z("error",L,b),z("load",E,b=function(){if(S(),i=[E.response,t],y=E.responseURL,x>=300&&x<400){var n=jt(St(y));return c[n]&&delete c[n],T("success",i),T(x,i),void A(p=l,vt,y||e)}H(-1===e.indexOf("#")&&y||e),w&&($=Z(i[0])),T("success",i),T(x,i),w&&d&&K(v),k=O(r.sources),w&&(m=Q(i[0])),st(i),T("enter",i)}),z("load",L,b),z("progress",E,(function(t){S(),T("pull",t.lengthComputable?[t.loaded,t.total]:[0,-1])})),z("progress",L,(function(t){S(),T("push",t.lengthComputable?[t.loaded,t.total]:[0,-1])})),E}function S(){f=Ht(E),x=E.status,vt===n&&r.cache&&x&&(c[jt(St(e))]=[x,E.response,f,w]),u.lot=f,u.status=x}}function C(t){g[t]&&g[t][0]&&(g[t][0].abort(),delete g[t])}function R(){for(var t in g)C(t)}function P(t,e,o,c){o=n(r.ref)?r.ref.call(u,t,o):o;var a,f=new XMLHttpRequest,s=ct(o.split(/[?&#]/)[0].split("/").pop().split(".")[1]||""),l=r.types[s]||r.type||ht;if(n(l)&&(l=l.call(u,o)),f.responseType=l,f.open(e,o,!0),i(c))for(a in c)f.setRequestHeader(a,c[a]);return f.send("POST"===e?new FormData(t):null),f}function N(t,n){var e=P(t,vt,n);z("load",e,(function(){200===(x=e.status)&&(c[jt(St(n))]=[x,e.response,Ht(e),dt===e.responseType])}))}function K(t){if(t){var n=function(t){return[t.offsetLeft,t.offsetTop]}(t);ut(V,n),ut(v,n)}}function U(n,e,r,u){var i,o,c,a=r(n),f={};for(i in e)if((o=b("#"+i.replace(/[:.]/g,"\\$&"),t))&&(f[i]=E(o)),!a[i]){delete e[i];var s=$t(i);s&&F(s)}for(i in a)e[i]||(e[i]=c=a[i],f[i]&&S(f[i])?q(f[i],M(c)):u&&B(u,M(c)));return e}function J(t){return U(t,a,yt,W)}function Q(t){return U(t,m,xt,V)}function Z(t){return U(t,$,Et,W)}function tt(){z("keydown",s,it),z("keyup",s,ot),V=s.body,W=s.head,u.links=a=yt(),u.scripts=m=xt(),u.styles=$=Et(),st([s,l]),r.cache&&N(l,kt())}function nt(t){if(R(),!j){var n,e=this,u=e.href,i=e.action,o=jt(u||i),c=ct(e.method||vt);vt===c&&(Lt(e)&&(n=new URLSearchParams(new FormData(e))+"",o=o.split(/[?&#]/)[0]+(n?"?"+n:"")),r.turbo&&H(o)),g[o]=[A(e,c,o),e],X(t)}}function et(t){K($t(bt(kt()),1)),X(t)}function rt(){var t=this,n=t.href;c[jt(St(n))]||N(t,n),_("mousemove",t,rt)}function it(t){j=t.ctrlKey}function ot(){j=!1}function at(t){d=kt(),R(),bt(d)&&St(h)===St(d)||(g[d]=[A(l,vt,d),l])}function st(n){var e=r.turbo;k.forEach((function(t){var n,r,u;z(mt(t),t,nt),Lt(t)?(n=t,r=D("input",{type:"hidden"}),u=y("[name][type=submit][value]",n),B(n,r),u.forEach((function(t){z("click",t,(function(){r.name=this.name,r.value=this.value}))}))):e&&function(t){z("mousemove",t,rt)}(t)})),function(n){if(w.focus)T("focus",n);else{var e=b("[autofocus]",t);e&&e.focus()}}(n),function(t){w.scroll?T("scroll",t):K($t(bt(kt()),1))}(n)}}At.instances={},At.state={cache:!1,history:!0,is:function(t,n){var e=t.target,r=h(t,"href")||h(t,"action")||"",u=t.href||t.action||"";return(!e||"_self"===e)&&("#"!==r[0]&&!/^(data|javascript|mailto):/.test(r)&&((!bt(u)||St(n)!==St(u))&&(""===r||0===r.search(/[.\/?]/)||0===r.indexOf(gt)||0===r.indexOf(U.protocol+gt)||-1===r.indexOf("://"))))},lot:{"x-requested-with":pt},ref:function(t,n){return n},sources:"a[href],form",turbo:!1,type:dt,types:{"":dt,CSS:ht,JS:ht,JSON:"json"}},At.version="1.1.16";function Ct(t,n){return(t||"")["trim"+(-1===n?"Left":1===n?"Right":"")]()}function Ft(r,u){if(void 0===u&&(u={}),r){var i=this;if(!r.TE){if(!e(i,Ft))return new Ft(r,u);i.state=u=G(Ft.state,c(u)?{tab:u}:u||{}),i.self=i.source=r,Ft.instances[r.id||r.name||ft(Ft.instances)]=i,r.TE=1;var a=/^([\s\S]*?)$/,f=function(){return r.disabled},s=function(){return r.readOnly},d=function(){return r.value.replace(/\r/g,"")};return i.value=d(),i.get=function(){return!f()&&Ct(d())||null},i.let=function(){return r.value=i.value},i.set=function(t){return f()||s()||(r.value=t),i},i.$=function(){return new Ft.S(r.selectionStart,r.selectionEnd,d())},i.focus=function(t){var n,e;return-1===t?n=e=0:1===t&&(n=at(d()),e=r.scrollHeight),o(n)&&o(e)&&(r.selectionStart=r.selectionEnd=n,r.scrollTop=e),r.focus(),i},i.blur=function(){return r.blur(),i},i.select=function(){if(f()||s())return r.focus(),i;for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var u,o,c,a,d=at(n),h=i.$(),g=h.start,m=h.end;if(u=l.pageXOffset||v.scrollLeft||p.scrollLeft,o=l.pageYOffset||v.scrollTop||p.scrollTop,c=r.scrollLeft,a=r.scrollTop,0===d)n[0]=g,n[1]=m;else if(1===d){if(!0===n[0])return r.focus(),r.select(),i;n[1]=n[0]}return r.focus(),r.selectionStart=n[0],r.selectionEnd=n[1],r.scrollLeft=c,r.scrollTop=a,l.scroll(u,o),i},i.match=function(e,r){var u=i.$(),o=u.after,c=u.before,a=u.value;if(t(e)){var f=[c.match(e[0]),a.match(e[1]),o.match(e[2])];return n(r)?r.call(i,f[0]||[],f[1]||[],f[2]||[]):[!!f[0],!!f[1],!!f[2]]}var s=a.match(e);return n(r)?r.call(i,s||[]):!!s},i.replace=function(t,n,e){var r=i.$(),u=r.after,o=r.before,c=r.value;return-1===e?o=o.replace(t,n):1===e?u=u.replace(t,n):c=c.replace(t,n),i.set(o+c+u).select(o=at(o),o+at(c))},i.insert=function(t,n,e){var r=a;return e&&i.replace(r,""),-1===n?r=/$/:1===n&&(r=/^/),i.replace(r,t,n)},i.wrap=function(t,n,e){var r=i.$(),u=r.after,o=r.before,c=r.value;return e?i.replace(a,t+"$1"+n):i.set(o+t+c+n+u).select(o=at(o+t),o+at(c))},i.peel=function(t,n,e){var r=i.$(),u=r.after,o=r.before,c=r.value;t=tt(t)||Z(t),n=tt(n)||Z(n),t=t.replace(/^\^|\$$/g,""),n=n.replace(/^\^|\$$/,"");var a=et(t+"$",""),f=et("^"+n,"");return e?i.replace(et("^"+t+"([\\s\\S]*?)"+n+"$",""),"$1"):a.test(o)&&f.test(u)?(o=o.replace(a,""),u=u.replace(f,""),i.set(o+c+u).select(o=at(o),o+at(c))):i.select()},i.pull=function(t,n){void 0===n&&(n=!0);var e=i.$(),r=e.length,c=e.value;return t=o(t)?t:u.tab,t=(t=tt(t)||Z(t)).replace(/^\^/,""),r?n?i.replace(et("^"+t,"gm"),""):i.insert(c.split("\n").map((function(n){return et("^("+t+")*$","").test(n)?n:n.replace(et("^"+t,""),"")})).join("\n")):i.replace(et(t+"$",""),"",-1)},i.push=function(t,n){void 0===n&&(n=!1);var e=i.$().length;return t=o(t)?t:u.tab,e?i.replace(et("^"+(n?"":"(?!$)"),"gm"),t):i.insert(t,-1)},i.trim=function(t,n,e,r,u){void 0===u&&(u=!0),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==e&&!1!==e&&(e=e||""),null!==r&&!1!==r&&(r=r||"");var o=i.$(),c=o.before,a=o.value,f=o.after,s=Ct(c,1),l=Ct(f,-1);return c=!1!==t?Ct(c,1)+(s||!u?t:""):c,f=!1!==n?(l||!u?n:"")+Ct(f,-1):f,!1!==e&&(a=Ct(a,-1)),!1!==r&&(a=Ct(a,1)),i.set(c+a+f).select(c=at(c),c+at(a))},i.pop=function(){return r.TE?(delete r.TE,i):i},i.state=u,i}}}Ft.esc=Z,Ft.instances={},Ft.state={tab:"\t"},Ft.S=function(t,n,e){var r=this,u=e.slice(t,n);r.start=t,r.end=n,r.value=u,r.before=e.slice(0,t),r.after=e.slice(n),r.length=at(u),r.toString=function(){return u}},Ft.version="3.2.3",Ft.x=rt;var Rt=function(t,n){return-1!==n.indexOf(t)},Bt=l.setTimeout;
/*!
   *
   * The MIT License (MIT)
   *
   * Copyright © 2020 Taufik Nurrohman
   *
   * <https://github.com/taufik-nurrohman/tag-picker>
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the “Software”), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   *
   */function Pt(n,u){if(void 0===u&&(u={}),n){var o=this;if(!n.TP){if(!e(o,Pt))return new Pt(n,u);var a=function(){return n.disabled},f=function(){return n.readOnly},s=h(n,"placeholder"),l=h(n,"tabindex"),p=Y(o).fire;o.state=u=G(Pt.state,c(u)?{join:u}:u||{}),o.source=n,Pt.instances[n.id||n.name||ft(Pt.instances)]=o,n.TP=1;var v,d,g=D("span",{class:"editor tag"}),b=D("span",{contenteditable:!a()&&"true",spellcheck:"false",style:"white-space:pre;"}),y=D("span"),k=function(t){var n="form";if(O(t,n)&&n===x(t.form))return t.form;for(var e=$(t);e&&n!==x(e);)e=$(e);return e||null}(n),w=D("span",{class:u.class}),j=D("span",{class:"tags"});return st(""),B(w,j),B(j,g),B(g,b),B(g,y),P(n,u.class+"-source"),d=w,$(v=n).insertBefore(d,E(v)),D(n,{tabindex:"-1"}),z("blur",b,N),z("click",b,M),z("click",w,W),z("focus",b,I),z("focus",n,Z),z("keydown",b,U),z("paste",b,V),k&&z("submit",k,Q),o.blur=function(){return!a()&&(b.blur(),N())},o.click=function(){return w.click()},W(),o.f=function(t){return ot(t||"").replace(/[^ a-z\d-]/g,"")},o.focus=function(){return a()||(b.focus(),I()),o},o.get=function(t){return a()?null:lt(t,1)},o.input=b,o.let=function(t){if(!a()&&!f()){var n=u.min;if(R(),n>0&&at(o.tags)<n)return p("min.tags",[n]),o;ht(t),pt(t)}return o},o.pop=function(){if(!n.TP)return o;delete n.TP;var t=o.tags;return A(n,u.class+"-source"),_("blur",b,N),_("click",b,M),_("click",w,W),_("focus",b,I),_("focus",n,Z),_("keydown",b,U),_("paste",b,V),k&&_("submit",k,Q),t.forEach(ht),D(n,{tabindex:l}),F(w),p("pop",[t])},o.self=w,o.set=function(t,n){if(!a()&&!f()){var e=o.tags,r=u.max;lt(t)?p("has.tag",[t,it(t,e)]):at(e)<r?(dt(t,n),vt(t,n)):p("max.tags",[r])}return o},o.source=o.output=n,o.state=u,o.tags=[],J(n.value),o.value=function(t){return!a()&&!f()&&J(t)},o}}function H(t){return o.f(t).replace(et("("+u.escape.join("|").replace(/\\/g,"\\\\")+")+"),"").trim()}function R(){if(a()||f())return st("");var t,n=H(T(b)),e=o.tags;n&&(lt(n)?p("has.tag",[n,it(n,e)]):(dt(n),vt(n),t=at(e),p("change",[n,t]),p("set.tag",[n,t])),st(""))}function N(){R(),C(w,["focus","focus.input"]),p("blur",[o.tags,at(o.tags)])}function M(){p("click",[o.tags])}function I(){P(w,"focus"),P(w,"focus.input"),p("focus",[o.tags])}function U(t){var n,e=u.escape,r=t.key,i=t.keyCode,c=t.ctrlKey,l="Enter"===r||13===i,v=t.shiftKey,d="Tab"===r||9===i,h=L(g),m=at(o.tags),k=u.max,x=H(T(b));l?r="\n":d&&(r="\t"),d||(a()||f()?(l&&f()&&gt(),X(t)):Rt(r,e)||Rt(i,e)?(m<k?R():(st(""),p("max.tags",[k])),X(t)):l?(gt(),X(t)):Bt((function(){var u=T(b)||"",a=H(u);Rt(u.slice(-1),e)?(m<k?R():(st(""),p("max.tags",[k])),X(t)):""!==a||c||v||(""!==x||"Backspace"!==r&&"Backspace"!==i?"ArrowLeft"!==r&&37!==i||h&&h.focus():(A(w,"focus.tag"),ht(n=o.tags[m-1]),pt(n),h&&(p("change",[n,m-1]),p("let.tag",[n,m-1])))),K(y,a?"":s)}),0))}function J(t){if(S(w))for(var e;e=L(g);)ht(e.title);o.tags=[],n.value="",t=t?t.split(u.join):[];for(var r,i=0,c=u.max;i<c&&t[i];++i)if(""!==(r=H(t[i]))){if(lt(r))continue;dt(r),vt(r),p("change",[r,i]),p("set.tag",[r,i])}}function Q(t){if(!a()){var n=u.min;return R(),n>0&&at(o.tags)<n?(st("",1),p("min.tags",[n]),void X(t)):1}}function V(){Bt((function(){a()||f()||J(T(b)),st("")}),0)}function W(t){t&&w===t.target&&(b.focus(),M())}function Z(){b.focus()}function tt(){var t=this.title,n=o.tags;C(w,["focus","focus.tag"]),p("blur.tag",[t,it(t,n)])}function nt(){var t=this.title,n=o.tags;p("click.tag",[t,it(t,n)])}function rt(){var n=this.title,e=o.tags;!function(n,e){if(t(e))return e.forEach((function(t){return n.classList.add(t)})),n;if(i(e))for(var r in e)e[r]?n.classList.add(r):n.classList.remove(r);n.className=e}(w,["focus","focus.tag"]),p("focus.tag",[n,it(n,e)])}function ut(t){if(!a()&&!f()){var n=$(this).title,e=o.tags,r=it(n,e);ht(n),pt(n),st("",1),p("change",[n,r]),p("click.tag",[n,r]),p("let.tag",[n,r])}X(t)}function ct(t){var n=t.key,e=t.keyCode,r=t.ctrlKey,u=t.shiftKey,i=this,c=E(i),a=L(i);if(!r&&!u)if(f()||"ArrowLeft"!==n&&37!==e)if(f()||"ArrowRight"!==n&&39!==e){if("Backspace"===n||8===e||"Delete"===n||46===e){if(!f()){var s=i.title,l=o.tags,v=it(s,l);A(w,"focus.tag"),ht(s),pt(s),"Backspace"===n||8===e?a?a.focus():st("",1):c&&c!==g?c.focus():st("",1),p("change",[s,v]),p("let.tag",[s,v])}X(t)}}else c&&c!==g?c.focus():st("",1),X(t);else a&&(a.focus(),X(t))}function st(t,n){K(b,t),K(y,t?"":s),n&&b.focus()}function lt(t,n){var e=o.tags,u=it(t,e);return n&&p("get.tag",[t,u]),r(u)?t:null}function pt(t){var e=o.tags,i=it(t,e);return!!(r(i)&&i>=0)&&(n.value=e.join(u.join),o.tags.splice(i,1),!0)}function vt(t,e){r(e)?(e=e<0?0:e,o.tags.splice(e,0,t)):o.tags.push(t),n.value=o.tags.join(u.join)}function dt(t,n){var e=D("span",{class:"tag",tabindex:!a()&&"0",title:t});if(u.x){var i=D("a",{href:"",tabindex:"-1",target:"_top"});z("click",i,ut),B(e,i)}z("blur",e,tt),z("click",e,nt),z("focus",e,rt),z("keydown",e,ct),S(j)&&(r(n)&&o.tags[n]?q(m(j,n),e):q(g,e))}function ht(t){var n,e=it(t,o.tags);if(r(e)&&e>=0&&(n=m(j,e))){if(_("blur",n,tt),_("click",n,nt),_("focus",n,rt),_("keydown",n,ct),u.x){var i=n.firstElementChild||null;i&&(_("click",i,ut),F(i))}F(n)}}function gt(){Q()&&k&&k.submit()}}Pt.instances={},Pt.state={class:"tag-picker",escape:[",",188],join:", ",max:9999,min:0,x:!1},Pt.version="3.1.9",Object.assign(l,{F3H:At,TE:Ft,TP:Pt})}();