!function(){"use strict";var t=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},e=function(t){return t.length},r=function(e,r){return t(r[0])&&e<r[0]?r[0]:t(r[1])&&e>r[1]?r[1]:e};
/*!
   *
   * The MIT License (MIT)
   *
   * Copyright © 2020 Taufik Nurrohman
   *
   * <https://github.com/taufik-nurrohman/text-editor>
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the “Software”), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   *
   */
if(t(TE)){var n=TE.prototype;n._history=[],n._historyState=-1,n.history=function(e){var r=this;return t(e)?t(r._history[e])?r._history[e]:null:r._history},n.record=function(e){var r=this,n=r.$(),o=n.end,i=n.start,s=r._history[r._historyState]||[],u=[r.self.value,i,o];return u[0]===s[0]&&u[1]===s[1]&&u[2]===s[2]||(++r._historyState,r._history[t(e)?e:r._historyState]=u),r},n.loss=function(e){var n,o=this;return!0===e?(o._history=[],o._historyState=-1,[]):(n=o._history.splice(t(e)?e:o._historyState,1),o._historyState=r(o._historyState-1,[-1]),n)},n.undo=function(){var t,n=this;return n._historyState=r(n._historyState-1,[0,e(n._history)-1]),t=n._history[n._historyState],n.set(t[0]).select(t[1],t[2])},n.redo=function(){var t,n=this;return n._historyState=r(n._historyState+1,[0,e(n._history)-1]),t=n._history[n._historyState],n.set(t[0]).select(t[1],t[2])}}var o=function(t){return t&&t.preventDefault()},i=function(t,e){return t in e},s=function(t,e){return void 0===e&&(e=""),t.replace(c("["+e+a.replace(/./g,"\\$&")+"]"),"\\$&")},u=function(e){return function(e,r){return e&&t(r)&&e instanceof r}(e,RegExp)},c=function(e,r){return u(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,t(r)?r:"g"))},a="!$^*()+=[]{}|:<>,.?/-";
/*!
   *
   * The MIT License (MIT)
   *
   * Copyright © 2020 Taufik Nurrohman
   *
   * <https://github.com/taufik-nurrohman/text-editor>
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the “Software”), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   *
   */
if(t(TE)){var l=TE;function f(t,e){void 0===e&&(e={});var r=this;l.call(r,t,e),e=r.state;var n=i("source",e)?e.source:{};if(!n)return r;var u={},a=r.pop,f=i("undo",l.prototype);u.close={"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},u.pull=function(t){var e=t.key,r=t.keyCode,n=t.ctrlKey,o=t.shiftKey;return n&&!o&&(e&&"["===e||r&&219===r)},u.push=function(t){var e=t.key,r=t.keyCode,n=t.ctrlKey,o=t.shiftKey;return n&&!o&&(e&&"]"===e||r&&221===r)},n&&(e.source=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(e))}(u,!0===e.source?{}:e.source));var y,h,p,v=e.source||{};function _(n){if(!t.disabled&&!t.readOnly){var i=v.close,u=e.tab,a=function(t){return t.toLowerCase()}(n.key||String.fromCharCode(k)),l=n.keyCode,f=n.ctrlKey,y="enter"===a||13===l;n.shiftKey;var h=r.$(),p=h.after,_=h.before,S=h.end;h.start;var b=h.value,g=_.slice(-1),E=p.slice(0,1),m=_.match(c("(?:^|\\n)("+s(u)+"+).*$","")),$=m?m[1]:"",C=i[a];if(v.push&&v.push.call(r,n))r.push(u),d(),o(n);else if(v.pull&&v.pull.call(r,n))r.pull(u),d(),o(n);else if(f)"z"===a||90===l?(r.undo(),d(),o(n)):"y"!==a&&89!==l||(r.redo(),d(),o(n));else if("\\"!==g&&a===E)r.select(S+1),d(),o(n);else if("\\"!==g&&C)d(),r.wrap(a,C),d(),o(n);else if("backspace"===a||8===l){var K="",T="";for(var w in i)K+=w,T+=i[w];K="(["+s(K)+"])",T="(["+s(T)+"])";var O=_.match(c(K+"\\n(?:"+s($)+")$","")),j=p.match(c("^\\n(?:"+s($)+")"+T,""));!b&&O&&j&&j[1]===i[O[1]]?(r.trim("",""),d(),o(n)):!b&&_.match(c(s(u)+"$",""))?(r.pull(u),d(),o(n)):(C=i[g])&&C===E&&"\\"!==_.slice(-2,-1)&&(r.peel(g,E),o(n)),d()}else"delete"===a||46===l?((C=i[g])&&C===E&&(r.peel(g,E),o(n)),d()):y?((C=i[g])&&C===E?(r.wrap("\n"+u+$,"\n"+$).blur().focus(),o(n)):(b||$)&&(r.insert("\n",-1,!0).push($).blur().focus(),o(n)),d()):setTimeout(d,0)}}function d(){f&&r.record()}return n&&(y="keydown",h=_,void 0===p&&(p=!1),t.addEventListener(y,h,p),d()),r.pop=function(){return function(t){return"function"==typeof t}(a)&&a.call(r),function(t,e,r){e.removeEventListener(t,r)}("keydown",t,_),f&&r.loss(!0),r},r.state=e,r}for(var y in f.prototype=function(t){return Object.create(t)}(l.prototype),f.prototype.constructor=f,l)f[y]=l[y];TE=f}}();